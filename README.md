# 🎮 游戏信息流广告脚本自动化工具

一款 AI 驱动的游戏广告脚本生成工具，帮助广告创意团队快速生成高质量的信息流广告脚本。

## ✨ 功能特点

- **智能脚本生成**: 基于 RAG 检索同品类爆款脚本，结合 AI 生成高质量广告脚本
- **标准三栏输出**: 自动生成分镜、口播、设计意图三栏表格格式
- **多模型支持**: 支持 OpenAI、文心一言、豆包等 OpenAI 兼容格式的 API
- **知识库管理**: 按游戏品类分类存储脚本，支持导入导出
- **项目归档**: 以客户/项目维度管理工作内容，独立存储历史数据

## 🚀 快速开始

### 1. 环境要求

- Python 3.10+
- pip 包管理器

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 启动应用

```bash
streamlit run app.py
```

应用将在浏览器中自动打开，默认地址: `http://localhost:8501`

## 📖 使用指南

### 第一步：配置 API

1. 点击左侧边栏的 **⚙️ API 设置**
2. 填写以下信息：
   - **配置名称**: 为配置起一个名称（如 "OpenAI"、"文心一言"）
   - **API Key**: 您的 API 密钥
   - **Base URL**: API 服务地址
     - OpenAI: `https://api.openai.com/v1`
     - 文心一言: `https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat`
     - 豆包: 参考豆包官方文档
   - **Model ID**: 模型标识符（如 `gpt-4`、`gpt-3.5-turbo`）
3. 点击 **💾 保存配置**
4. 点击 **🔗 测试连接** 验证配置是否正确

### 第二步：创建项目

1. 点击左侧边栏的 **📁 项目管理**
2. 填写 **客户名称** 和 **项目名称**
3. 点击 **➕ 创建项目**

> 💡 项目用于组织和归档您的工作内容，每个项目独立存储游戏介绍、卖点和历史脚本。

### 第三步：生成脚本

1. 在主界面的 **📝 脚本生成** 标签页中填写：
   - **游戏介绍**: 游戏的基本介绍，包括类型、玩法特点等
   - **独特卖点 (USP)**: 游戏区别于竞品的核心优势
   - **目标人群**: 广告投放的目标受众特征
   - **游戏品类**: 选择游戏所属品类（SLG、MMO、休闲等）

2. 点击 **🚀 生成脚本**

3. 等待 AI 生成脚本，过程中会显示：
   - RAG 检索同品类参考脚本
   - 生成脚本初稿
   - AI 评审并给出修改意见
   - 迭代修正生成最终版本

4. 生成完成后，脚本将以三栏表格形式展示：
   | 分镜 | 口播 | 设计意图 |
   |------|------|----------|
   | ... | ... | ... |

5. 点击 **📥 入库** 将满意的脚本存入知识库

### 第四步：管理知识库

#### 浏览知识库
1. 切换到 **📚 知识库** 标签页
2. 使用品类筛选查看不同类型的脚本
3. 点击脚本卡片查看详情

#### 导出知识库
1. 点击 **📤 导出为 ZIP**
2. 下载生成的 ZIP 文件进行备份

#### 导入知识库
1. 上传之前导出的 ZIP 文件
2. 点击 **📥 导入知识库**

### 第五步：查看项目历史

1. 切换到 **📊 项目历史** 标签页
2. 选择客户和项目
3. 查看该项目下所有历史生成的脚本

## 📁 数据存储

所有数据存储在项目的 `./data` 目录下：

```
data/
├── config.json          # API 配置文件
├── vector_db/           # 向量数据库（ChromaDB）
├── scripts/             # 原始脚本数据
│   ├── SLG/
│   ├── MMO/
│   └── ...
└── projects/            # 项目数据
    └── {客户名}/
        └── {项目名}/
            ├── project.json
            └── scripts/
```

## 🎨 界面说明

### 侧边栏
- **⚙️ API 设置**: 配置和管理 LLM API
- **📁 项目管理**: 创建、选择、删除项目
- **📚 知识库管理**: 查看状态、导入导出知识库

### 主界面标签页
- **📝 脚本生成**: 输入信息并生成广告脚本
- **📚 知识库**: 浏览和管理已入库的脚本
- **📊 项目历史**: 查看项目的历史脚本记录

## ⚠️ 常见问题

### Q: API 连接失败怎么办？
A: 请检查：
1. API Key 是否正确
2. Base URL 是否正确（注意末尾不要有多余的斜杠）
3. Model ID 是否存在
4. 网络是否正常

### Q: 生成的脚本格式不正确？
A: 如果 AI 返回的格式无法解析，系统会显示原始内容，您可以手动复制并编辑。

### Q: 如何迁移数据到另一台电脑？
A: 
1. 导出知识库为 ZIP 文件
2. 复制整个 `./data` 目录
3. 在新电脑上导入知识库并恢复 `./data` 目录

### Q: 支持哪些 AI 模型？
A: 支持所有 OpenAI 兼容格式的 API，包括：
- OpenAI (GPT-4, GPT-3.5-turbo 等)
- 文心一言
- 豆包
- 通义千问
- 其他兼容 OpenAI API 格式的服务

## 🔧 开发相关

### 运行测试
```bash
python -m pytest tests/ -v
```

### 项目结构
```
├── app.py                 # Streamlit 主应用
├── src/
│   ├── api_manager.py     # API 配置管理
│   ├── rag_system.py      # RAG 知识库系统
│   ├── project_manager.py # 项目管理
│   ├── script_generator.py# 脚本生成器
│   └── prompts.py         # Prompt 模板
├── tests/                 # 测试文件
├── data/                  # 数据存储目录
└── requirements.txt       # 依赖配置
```

## 📄 许可证

内部使用工具，仅供团队内部使用。
